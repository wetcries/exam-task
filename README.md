# Задача 1.2
Реализовать простейший консольный чат между двумя клиентами.
Первый запущенный клиент берет на себя роль “мастера”, второй клиент подключается к нему.
Нужно уметь сохранять историю чата и показывать ее обоим клиентам при установлении нового соединения.

## Сборка


Для сборки проекта нужно иметь установленные maven и java.

Чтобы собрать проект, необходимо, находясь в директории с файлом pom.xml,
выполнить следующую команду:

```shell
mvn package
```

В папке target будет находиться jar архив проекта. 
(Для удобства в репозитории уже находиться jar архив с приложением)

## Руководство по запуску/установке
Для работы "мастер" клиента необходима запущенная база данных postgres 
со следующими настройками: пользователь - gostask, 
пароль - gostask, название базы данных - gostask, порт - 5432.
Если планируется запуск с другми настройками, то в файле
application.yaml необходимо заполнить соответсвтующие поля 
для подключения к базе данных.

Команда для запуска докер контейнера с postgres:
```shell
docker run --name some-postgres -e POSTGRES_PASSWORD=gostask -e POSTGRES_USER=gostask -e POSTGRES_DB -p 5432:5432 -d postgres
```

При обычном запуске приложения, клиент будет работать в "мастер" 
режиме. Чтобы перейти в режим обычного клиента, необходимо передать 
в аргументах командной строки ключ client. В этом случае 
серверная часть не будет работать.

Для запуска необходимо наличие установленной java
на компьютере. Запустить приложение можно следующей командой:

```shell
java -jar chat-0.0.1-SNAPSHOT.jar # для запуска в мастер режиме
java -jar chat-0.0.1-SNAPSHOT.jar client # для запуска в режиме обычного клиента
```

При успешном запуске "мастер" клиента вас встретит 
приветственный диалог и попросит ввести имя пользователя:
```
----------------------------------
Welcome! You are on master client!
----------------------------------
Input your username: 

```

После ввода имени пользователя будет выведена история последних сообщений. 
Можно начинать пользоваться чатом.

```
----------------------------------
Welcome! You are on master client!
----------------------------------
Input your username: 
Admin
History is empty. Be the first to post something!
Hello world!
Admin (Tue Jan 18 17:46:06 MSK 2022) : Hello world!
```

При запуске с флагом client вас также должен встретить приветсвенный 
диалог.

```
----------------------------------
Welcome! You are on simple client!
----------------------------------
Input your username: 
Client
Last 1 messages:
Admin (Tue Jan 18 17:46:06 MSK 2022) : Hello world!
Hello admin!
Client (Tue Jan 18 17:47:12 MSK 2022) : Hello admin!
```

### Замечание
"Мастер" клиент запускается на порту 8080.

В качестве истории выводятся последние 50 сообщений,
чтобы сильно не засорять консоль.

У "мастер" клиента имеется конечная http точка `/messages` для выгрузки всех сообщений.

